{"version":3,"sources":["TabBarItem.tsx"],"names":["DEFAULT_ACTIVE_COLOR","DEFAULT_INACTIVE_COLOR","TabBarItem","getActiveOpacity","position","routes","tabIndex","length","inputRange","map","_","i","Animated","interpolate","outputRange","getInactiveOpacity","props","route","navigationState","scrollEnabled","renderLabelPassed","renderLabel","renderIcon","renderBadge","getLabelText","getTestID","getAccessibilityLabel","getAccessible","activeColor","inactiveColor","pressColor","pressOpacity","labelStyle","style","tabWidth","onPress","onLongPress","indexOf","isFocused","index","activeOpacity","inactiveOpacity","icon","label","activeIcon","focused","color","inactiveIcon","styles","opacity","StyleSheet","absoluteFill","undefined","labelText","marginTop","activeLabel","inactiveLabel","tabStyle","flatten","isWidthSet","width","tabContainerStyle","itemStyle","flex","scene","accessibilityLabel","badge","item","React","Component","create","margin","backgroundColor","alignItems","justifyContent","padding","minHeight","top","right"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  StyleSheet,\n  View,\n  StyleProp,\n  TextStyle,\n  ViewStyle,\n} from 'react-native';\nimport TouchableItem from './TouchableItem';\nimport { Scene, Route, NavigationState } from './types';\nimport Animated from 'react-native-reanimated';\nimport memoize from './memoize';\n\ntype Props<T extends Route> = {\n  position: Animated.Node<number>;\n  route: T;\n  navigationState: NavigationState<T>;\n  scrollEnabled?: boolean;\n  activeColor?: string;\n  inactiveColor?: string;\n  pressColor?: string;\n  pressOpacity?: number;\n  getLabelText: (scene: Scene<T>) => string | undefined;\n  getAccessible: (scene: Scene<T>) => boolean | undefined;\n  getAccessibilityLabel: (scene: Scene<T>) => string | undefined;\n  getTestID: (scene: Scene<T>) => string | undefined;\n  renderLabel?: (scene: {\n    route: T;\n    focused: boolean;\n    color: string;\n  }) => React.ReactNode;\n  renderIcon?: (scene: {\n    route: T;\n    focused: boolean;\n    color: string;\n  }) => React.ReactNode;\n  renderBadge?: (scene: Scene<T>) => React.ReactNode;\n  onPress: () => void;\n  onLongPress: () => void;\n  tabWidth: number;\n  labelStyle?: StyleProp<TextStyle>;\n  style: StyleProp<ViewStyle>;\n};\n\nconst DEFAULT_ACTIVE_COLOR = 'rgba(255, 255, 255, 1)';\nconst DEFAULT_INACTIVE_COLOR = 'rgba(255, 255, 255, 0.7)';\n\nexport default class TabBarItem<T extends Route> extends React.Component<\n  Props<T>\n> {\n  private getActiveOpacity = memoize(\n    (position: Animated.Node<number>, routes: Route[], tabIndex: number) => {\n      if (routes.length > 1) {\n        const inputRange = routes.map((_, i) => i);\n\n        return Animated.interpolate(position, {\n          inputRange,\n          outputRange: inputRange.map(i => (i === tabIndex ? 1 : 0)),\n        });\n      } else {\n        return 1;\n      }\n    }\n  );\n\n  private getInactiveOpacity = memoize((position, routes, tabIndex) => {\n    if (routes.length > 1) {\n      const inputRange = routes.map((_: Route, i: number) => i);\n\n      return Animated.interpolate(position, {\n        inputRange,\n        outputRange: inputRange.map((i: number) => (i === tabIndex ? 0 : 1)),\n      });\n    } else {\n      return 0;\n    }\n  });\n\n  render() {\n    const {\n      route,\n      position,\n      navigationState,\n      scrollEnabled,\n      renderLabel: renderLabelPassed,\n      renderIcon,\n      renderBadge,\n      getLabelText,\n      getTestID,\n      getAccessibilityLabel,\n      getAccessible,\n      activeColor = DEFAULT_ACTIVE_COLOR,\n      inactiveColor = DEFAULT_INACTIVE_COLOR,\n      pressColor,\n      pressOpacity,\n      labelStyle,\n      style,\n      tabWidth,\n      onPress,\n      onLongPress,\n    } = this.props;\n\n    const tabIndex = navigationState.routes.indexOf(route);\n    const isFocused = navigationState.index === tabIndex;\n\n    const activeOpacity = this.getActiveOpacity(\n      position,\n      navigationState.routes,\n      tabIndex\n    );\n    const inactiveOpacity = this.getInactiveOpacity(\n      position,\n      navigationState.routes,\n      tabIndex\n    );\n\n    let icon: React.ReactNode | null = null;\n    let label: React.ReactNode | null = null;\n\n    if (renderIcon) {\n      const activeIcon = renderIcon({\n        route,\n        focused: true,\n        color: activeColor,\n      });\n      const inactiveIcon = renderIcon({\n        route,\n        focused: false,\n        color: inactiveColor,\n      });\n\n      if (inactiveIcon != null && activeIcon != null) {\n        icon = (\n          <View style={styles.icon}>\n            <Animated.View style={{ opacity: inactiveOpacity }}>\n              {inactiveIcon}\n            </Animated.View>\n            <Animated.View\n              style={[StyleSheet.absoluteFill, { opacity: activeOpacity }]}\n            >\n              {activeIcon}\n            </Animated.View>\n          </View>\n        );\n      }\n    }\n\n    const renderLabel =\n      renderLabelPassed !== undefined\n        ? renderLabelPassed\n        : ({ route, color }: { route: T; color: string }) => {\n            const labelText = getLabelText({ route });\n\n            if (typeof labelText === 'string') {\n              return (\n                <Animated.Text\n                  style={[\n                    styles.label,\n                    // eslint-disable-next-line react-native/no-inline-styles\n                    icon ? { marginTop: 0 } : null,\n                    { color },\n                    labelStyle,\n                  ]}\n                >\n                  {labelText}\n                </Animated.Text>\n              );\n            }\n\n            return labelText;\n          };\n\n    if (renderLabel) {\n      const activeLabel = renderLabel({\n        route,\n        focused: true,\n        color: activeColor,\n      });\n      const inactiveLabel = renderLabel({\n        route,\n        focused: false,\n        color: inactiveColor,\n      });\n\n      label = (\n        <View>\n          <Animated.View style={{ opacity: inactiveOpacity }}>\n            {inactiveLabel}\n          </Animated.View>\n          <Animated.View\n            style={[StyleSheet.absoluteFill, { opacity: activeOpacity }]}\n          >\n            {activeLabel}\n          </Animated.View>\n        </View>\n      );\n    }\n\n    const tabStyle = StyleSheet.flatten(style);\n    const isWidthSet =\n      (tabStyle && typeof tabStyle.width !== 'undefined') ||\n      scrollEnabled === true;\n\n    const tabContainerStyle: ViewStyle = {};\n    const itemStyle = isWidthSet ? { width: tabWidth } : null;\n\n    if (tabStyle && typeof tabStyle.flex === 'number') {\n      tabContainerStyle.flex = tabStyle.flex;\n    } else if (!isWidthSet) {\n      tabContainerStyle.flex = 1;\n    }\n\n    const scene = { route };\n\n    let accessibilityLabel = getAccessibilityLabel(scene);\n\n    accessibilityLabel =\n      typeof accessibilityLabel !== 'undefined'\n        ? accessibilityLabel\n        : getLabelText(scene);\n\n    const badge = renderBadge ? renderBadge(scene) : null;\n\n    return (\n      <TouchableItem\n        borderless\n        testID={getTestID(scene)}\n        accessible={getAccessible(scene)}\n        accessibilityLabel={accessibilityLabel}\n        accessibilityTraits={isFocused ? ['button', 'selected'] : 'button'}\n        accessibilityComponentType=\"button\"\n        accessibilityRole=\"button\"\n        accessibilityStates={isFocused ? ['selected'] : []}\n        pressColor={pressColor}\n        pressOpacity={pressOpacity}\n        delayPressIn={0}\n        onPress={onPress}\n        onLongPress={onLongPress}\n        style={tabContainerStyle}\n      >\n        <View pointerEvents=\"none\" style={[styles.item, itemStyle, tabStyle]}>\n          {icon}\n          {label}\n          {badge != null ? <View style={styles.badge}>{badge}</View> : null}\n        </View>\n      </TouchableItem>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  label: {\n    margin: 4,\n    backgroundColor: 'transparent',\n  },\n  icon: {\n    margin: 2,\n  },\n  item: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 10,\n    minHeight: 48,\n  },\n  badge: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n  },\n});\n"]}