{"version":3,"sources":["StackViewStyleInterpolator.tsx"],"names":["I18nManager","getSceneIndicesForInterpolationInputRange","EPS","forInitial","props","navigation","scene","focused","state","index","opacity","translate","transform","translateX","translateY","forHorizontal","layout","position","isMeasured","interpolate","first","last","width","initWidth","inputRange","outputRange","isRTL","extrapolate","shadowOpacity","shadowEnabled","overlayOpacity","cardOverlayEnabled","forVertical","height","initHeight","forFadeFromBottomAndroid","maxTranslation","forFadeToBottomAndroid","forFade","forNoAnimation"],"mappings":"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","sourcesContent":["import { I18nManager } from 'react-native';\nimport getSceneIndicesForInterpolationInputRange from '../../utils/getSceneIndicesForInterpolationInputRange';\nimport { SceneInterpolatorProps } from '../../types';\n\nconst EPS = 1e-5;\n\n/**\n * Utility that builds the style for the card in the cards stack.\n *\n *     +------------+\n *   +-+            |\n * +-+ |            |\n * | | |            |\n * | | |  Focused   |\n * | | |   Card     |\n * | | |            |\n * +-+ |            |\n *   +-+            |\n *     +------------+\n */\n\n/**\n * Render the initial style when the initial layout isn't measured yet.\n */\nfunction forInitial(props: SceneInterpolatorProps) {\n  const { navigation, scene } = props;\n\n  const focused = navigation.state.index === scene.index;\n  const opacity = focused ? 1 : 0;\n  // If not focused, move the scene far away.\n  const translate = focused ? 0 : 1000000;\n  return {\n    opacity,\n    transform: [{ translateX: translate }, { translateY: translate }],\n  };\n}\n\n/**\n * Standard iOS-style slide in from the right.\n */\nfunction forHorizontal(props: SceneInterpolatorProps) {\n  const { layout, position, scene } = props;\n\n  if (!layout.isMeasured) {\n    return forInitial(props);\n  }\n  const interpolate = getSceneIndicesForInterpolationInputRange(props);\n\n  if (!interpolate) return { opacity: 0 };\n\n  const { first, last } = interpolate;\n  const index = scene.index;\n\n  const width = layout.initWidth;\n  const translateX = position.interpolate({\n    inputRange: [first, index, last],\n    outputRange: I18nManager.isRTL\n      ? [-width, 0, width * 0.3]\n      : [width, 0, width * -0.3],\n    extrapolate: 'clamp',\n  });\n\n  const shadowOpacity = props.shadowEnabled\n    ? position.interpolate({\n        inputRange: [first, index, last],\n        outputRange: [0, 0.7, 0],\n        extrapolate: 'clamp',\n      })\n    : null;\n\n  let overlayOpacity = props.cardOverlayEnabled\n    ? position.interpolate({\n        inputRange: [index, last - 0.5, last, last + EPS],\n        outputRange: [0, 0.07, 0.07, 0],\n        extrapolate: 'clamp',\n      })\n    : null;\n\n  return {\n    transform: [{ translateX }],\n    overlayOpacity,\n    shadowOpacity,\n  };\n}\n\n/**\n * Standard iOS-style slide in from the bottom (used for modals).\n */\nfunction forVertical(props: SceneInterpolatorProps) {\n  const { layout, position, scene } = props;\n\n  if (!layout.isMeasured) {\n    return forInitial(props);\n  }\n  const interpolate = getSceneIndicesForInterpolationInputRange(props);\n\n  if (!interpolate) return { opacity: 0 };\n\n  const { first, last } = interpolate;\n  const index = scene.index;\n  const height = layout.initHeight;\n  const translateY = position.interpolate({\n    inputRange: [first, index, last],\n    outputRange: [height, 0, 0],\n    extrapolate: 'clamp',\n  });\n\n  return {\n    transform: [{ translateY }],\n  };\n}\n\n/**\n * Standard Android-style fade in from the bottom.\n */\nfunction forFadeFromBottomAndroid(props: SceneInterpolatorProps) {\n  const { layout, position, scene } = props;\n\n  if (!layout.isMeasured) {\n    return forInitial(props);\n  }\n  const interpolate = getSceneIndicesForInterpolationInputRange(props);\n\n  if (!interpolate) return { opacity: 0 };\n\n  const { first, last } = interpolate;\n  const index = scene.index;\n  const opacity = position.interpolate({\n    inputRange: [first, first + 0.5, first + 0.9, index, last - 1e-5, last],\n    outputRange: [0, 0.25, 0.7, 1, 1, 0],\n    extrapolate: 'clamp',\n  });\n\n  const height = layout.initHeight;\n  const maxTranslation = height * 0.08;\n  const translateY = position.interpolate({\n    inputRange: [first, index, last],\n    outputRange: [maxTranslation, 0, 0],\n    extrapolate: 'clamp',\n  });\n\n  return {\n    opacity,\n    transform: [{ translateY }],\n  };\n}\n\nfunction forFadeToBottomAndroid(props: SceneInterpolatorProps) {\n  const { layout, position, scene } = props;\n\n  if (!layout.isMeasured) {\n    return forInitial(props);\n  }\n  const interpolate = getSceneIndicesForInterpolationInputRange(props);\n\n  if (!interpolate) return { opacity: 0 };\n\n  const { first, last } = interpolate;\n  const index = scene.index;\n  const inputRange = [first, index, last];\n\n  const opacity = position.interpolate({\n    inputRange,\n    outputRange: [0, 1, 1],\n    extrapolate: 'clamp',\n  });\n\n  const height = layout.initHeight;\n  const maxTranslation = height * 0.08;\n\n  const translateY = position.interpolate({\n    inputRange,\n    outputRange: [maxTranslation, 0, 0],\n    extrapolate: 'clamp',\n  });\n\n  return {\n    opacity,\n    transform: [{ translateY }],\n  };\n}\n\n/**\n *  fadeIn and fadeOut\n */\nfunction forFade(props: SceneInterpolatorProps) {\n  const { layout, position, scene } = props;\n\n  if (!layout.isMeasured) {\n    return forInitial(props);\n  }\n  const interpolate = getSceneIndicesForInterpolationInputRange(props);\n\n  if (!interpolate) return { opacity: 0 };\n\n  const { first, last } = interpolate;\n  const index = scene.index;\n  const opacity = position.interpolate({\n    inputRange: [first, index, last],\n    outputRange: [0, 1, 1],\n    extrapolate: 'clamp',\n  });\n\n  return {\n    opacity,\n  };\n}\n\nfunction forNoAnimation() {\n  return {};\n}\n\nexport default {\n  forHorizontal,\n  forVertical,\n  forFadeFromBottomAndroid,\n  forFadeToBottomAndroid,\n  forFade,\n  forNoAnimation,\n};\n"]}